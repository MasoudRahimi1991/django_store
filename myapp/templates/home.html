{% extends 'base.html' %}

{% block title %}Home - Shop{% endblock %}

{% block content %}

<div class="container py-4">

  <!-- 🔹 Title -->
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">Active Products</h2>
    <p class="text-muted">Browse our latest available items below.</p>
    <hr class="w-25 mx-auto">
  </div>

  {% if products %}
  <!-- 🔹 Product Grid -->
  <div class="row g-4">
    {% for product in products %}
      <div class="col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm border-0 hover-shadow">

          <!-- Product Image -->
          {% if product.main_image %}
            <img src="{{ product.main_image.url }}"
                 class="card-img-top"
                 alt="{{ product.name }}"
                 style="object-fit: contain; height: 250px; background-color: #f8f9fa; padding: 10px;">
          {% else %}
            <img src="https://via.placeholder.com/300x250?text=No+Image"
                 class="card-img-top"
                 alt="No image"
                 style="object-fit: contain; height: 250px; background-color: #f8f9fa; padding: 10px;">
          {% endif %}

          <!-- Product Info -->
          <div class="card-body text-center">
            <h5 class="card-title fw-semibold">{{ product.name }}</h5>

            <!-- ⭐ Average Rating -->
            {% if product.avg_rating > 0 %}
              <div class="mb-2">
                {% for i in "12345" %}
                  {% if forloop.counter <= product.avg_rating %}
                    <span class="text-warning">★</span>
                  {% else %}
                    <span class="text-muted">☆</span>
                  {% endif %}
                {% endfor %}
                <small class="text-muted">
                  ({{ product.avg_rating }}/5{% if product.review_count %} — {{ product.review_count }} review{% if product.review_count > 1 %}s{% endif %}{% endif %})
                </small>
              </div>
            {% else %}
              <div class="text-muted mb-2"><small>No rating yet</small></div>
            {% endif %}

            <!-- Price -->
            <p class="text-success fw-bold mb-2">{{ product.price }} €</p>

            <!-- Details Button -->
            <a href="{% url 'product_detail' product.id %}" class="btn btn-outline-primary btn-sm">
              View Details
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  {% else %}
  <div class="text-center py-5">
    <p class="text-muted fs-5">No active products found.</p>
  </div>
  {% endif %}
</div>

<!-- Hover Effect CSS -->
<style>
  .hover-shadow:hover {
    transform: translateY(-4px);
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15)!important;
  }
</style>

{% endblock %}




